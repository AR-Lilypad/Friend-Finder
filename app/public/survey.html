<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Generational Friend Finder</title>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
</head>

<body>
    <div class="jumbotron">
        <h1 class="display-4">Generational Friends Meetup Here!</h1>
        <h3 class="lead">Take this survey to find a friend with common interests all having to do with activities. </h3>
        <hr class="my-4">
        <p>When complete, you'll see someone most compatible for you from other survey takers!</p>
    </div>
    <br>
    <h2>Survey Questions</h2>
    <h3>About You:</h3>
    <h4>Your Name (Required)</h4>
    <input type="text" id="fname" class="form-control" required>
    <br>
    <h4>Link to Photo Image (Required)</h4>
    <input type="text" id="photo" class="form-control" required>
    <br>
    <h4>Questions</h4>

    <div class="form-group">
        <h5><label for="question1">1. One of your favorite activities working with yarn?</label></h5>
        <p style="width: 220px;">
          <select class="form-control" id="question1">
            <option value="empty">Select a Value</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Stronly Agree)</option>
          </select>
        </p>

    <div class="form-group">
        <h5><label for="question2">2. One of your favorite activities making string art?</label></h5>
        <p style="width: 220px;">
          <select class="form-control" id="question2">
        <option value=""></option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Stronly Agree)</option>
    </select>

    <div class="form-group">
        <h5><label for="question3">3. One of your favorite activities is climbing?</label></h5>
        <p style="width: 220px;">
          <select class="form-control" id="question3">
        <option value=""></option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Stronly Agree)</option>
    </select>

    <div class="form-group">
        <h5><label for="question4">4. One of your favorite activities is couch surfing or napping?</label></h5>
        <p style="width: 220px;">
          <select class="form-control" id="question4">
        <option value=""></option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Stronly Agree)</option>
    </select>

    <div class="form-group">
        <h5><label for="question5">5. One of your favorite activities is running?</label></h5>
        <p style="width: 220px;">
          <select class="form-control" id="question5">
        <option value=""></option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Stronly Agree)</option>
    </select>

    <div class="form-group">
        <h5><label for="question6">6. One of your favorite activities eating great meals?</label></h5>
        <p style="width: 220px;">
          <select class="form-control" id="question6">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Stronly Agree)</option>
        </select>

        <div class="form-group">
            <h5><label for="question7">7. One of your favorite activities is being outside?</label></h5>
            <p style="width: 220px;">
              <select class="form-control" id="question7">
                <option value=""></option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Stronly Agree)</option>
            </select>

            <div class="form-group">
                <h5><label for="question8">8. One of your favorite activities is staying home?</label></h5>
                <p style="width: 220px;">
                  <select class="form-control" id="question8">
                    <option value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Stronly Agree)</option>
                </select>

                <div class="form-group">
                    <h5><label for="question9">9. One of your favorite activities hanging out with a buddy?</label></h5>
                    <p style="width: 220px;">
                      <select class="form-control" id="question9">
                        <option value=""></option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Stronly Agree)</option>
                    </select>

                    <div class="form-group">
                        <h5><label for="question10">10. You consider yourself to be the BEST buddy?</label></h5>
                        <p style="width: 220px;">
                          <select class="form-control" id="question10">
                            <option value=""></option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Stronly Agree)</option>
                        </select>
                        <br>
                        <br>
                        <button type="submit" class="btn btn-success btn-lg active" id="submit"
                            aria-pressed="true">Submit Your Survey</button>

                        <br>
                        <br>
                        <hr>
                        <footer class="footer">
                            <div class="container">
                                <p><a href="/api/friends">API Friends List</a> | <a
                                        href="https://github.com/AR-Lilypad/Friend-Finder">GitHub
                                        Repo</a></p>
                            </div>
                        </footer>

                    </div>

                    <!-- Modal -->
                    <div id="results-modal" class="modal fade" role="dialog">
                        <div class="modal-dialog">

                            <!-- Modal content-->
                            <div class="modal-content">
                               <strong>Your Closest Match</strong></h2>
                                </div>
                                <div class="modal-body">
                                    <h2 id="match-name"></h2>
                                    <img id="match-image" src="https://www.telegraph.co.uk/content/dam/news/2016/06/20/101167774_A_biker_shows_his_12-year-old_cat_Chiquinho_-which_always_rides_with_him_on_his_motorbike-_trans_NvBQzQNjv4BqpVlberWd9EgFPZtcLiMQf1X_50byq9Ah3wJAV0YS_Ms.jpg?imwidth=450" alt="">
                                </div>
                                <div class="modal-footer">
                                    <button class="btn btn-default" data-dismiss="modal">Close</button>
                                </div>
                            </div>

                        </div>
                    </div>

                    <script src="https://code.jquery.com/jquery-3.4.1.js"
                        integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
                        crossorigin="anonymous"></script>
                    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
                        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
                        crossorigin="anonymous"></script>
                    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
                        integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
                        crossorigin="anonymous"></script>

                    <script type="text/javascript">

                        // Capture the form inputs
                        $(document).ready(function () {
                            $("#submit").on("click", function (event) {
                                event.preventDefault();

                                // Form validation
                                function validateForm() {
                                    let isValid = true;
                                    $(".form-control").each(function () {
                                        if ($(this).val() === "") {
                                            isValid = false;
                                        }
                                    });

                                    return isValid;
                                }

                                // If all required fields are filled
                                if (validateForm()) {
                                    // Create an object for the user"s data
                                    let userInput = {
                                        name: $("#name").val(),
                                        photo: $("#photo").val(),
                                        scores: [
                                            $("#question1").val().trim(),
                                            $("#question2").val().trim(),
                                            $("#question3").val().trim(),
                                            $("#question4").val().trim(),
                                            $("#question5").val().trim(),
                                            $("#question6").val().trim(),
                                            $("#question7").val().trim(),
                                            $("#question8").val().trim(),
                                            $("#question9").val().trim(),
                                            $("#question10").val().trim()
                                        ]
                                    };

                                    // AJAX post the data to the friends API.
                                    $.post("/api/friends", userInput, function(data) {
                                        // console.log('response = ' + JSON.stringify(data));

                                        // Grab the result from the AJAX post so that the best match's name and photo are displayed.
                                        $("#match-name").html(data.name);
                                        $("#match-img").attr("src", data.image);

                                        // Show the modal with the best match
                                        $("#results-modal").modal("toggle");
                                    });
                                } else {
                                    alert("Please fill out all fields before submitting!");
                                }
                            });
                        });
                    </script>
</body>

</html>